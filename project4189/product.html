<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - Nandana Tea</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

    <header>
        <a href="index.html" class="logo"><i class="fa-solid fa-leaf"></i> Nandana Tea</a>
        <nav>
            <a href="index.html">Home</a>
            <a href="products.html">Products</a>
            <a href="about.html">About Us</a>
            <a href="contact.html">Contact</a>
        </nav>
        <div class="header-icons">
            <a href="products.html"><i class="fa-solid fa-cart-shopping"></i> Cart</a>
            <a href="#" id="search-icon" title="Search"><i class="fa-solid fa-magnifying-glass"></i></a>
        </div>
        <div class="hamburger-menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
    </header>

    <main class="container">
        <section class="page-header">
            <h1 id="pd-name">Product Details</h1>
            <p id="pd-subtitle">Explore the flavors of Nandana Tea.</p>
        </section>

        <section class="product-detail">
            <div class="pd-image-wrap">
                <img id="pd-image" src="" alt="Product image">
            </div>
            <div class="pd-info">
                <h2 id="pd-title">Tea Name</h2>
                <p id="pd-desc" class="pd-desc">Description</p>
                <div class="pd-price" id="pd-price">$0.00</div>

                <div id="pd-wholesale" class="pd-wholesale" style="display:none; margin-top:0.5rem; font-weight:700; color:var(--accent-mint-green);"></div>

                <div class="pd-actions">
                    <label for="pd-qty">Quantity</label>
                    <input id="pd-qty" type="number" min="1" value="1">
                    <button id="pd-add" class="btn btn-primary"><i class="fa-solid fa-cart-plus"></i> Add to Cart</button>
                    <button id="pd-order" class="btn btn-secondary"><i class="fa-solid fa-credit-card"></i> Place Order</button>
                </div>
            </div>
        </section>

        <section class="product-explainer">
            <div class="pd-meta">
                <h3>Origin & Tasting</h3>
                <p id="pd-origin"></p>
                <p id="pd-notes"></p>
            </div>
            <div class="pd-brew">
                <h3>Brewing Guide</h3>
                <ul id="pd-brew"></ul>
            </div>
            <div class="pd-benefits">
                <h3>Health Notes</h3>
                <p id="pd-benefits"></p>
            </div>
            <div class="pd-history">
                <h3>History</h3>
                <p id="pd-history"></p>
            </div>
        </section>
    </main>

    <footer>
        <div class="container footer-content">
            <p>© 2025 Nandana Tea Factory. All rights reserved.</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="contact.html">Contact Us</a>
            </div>
        </div>
    </footer>

    <script>
    // Minimal, sourced PRODUCTS (essential fields only)
    const PRODUCTS = {
        'black-tea': {
            id: 'black-tea',
            name: 'Nandana Black Tea',
            desc: 'Full-bodied Sri Lankan black tea with malty notes.',
            price: 12.00,
            image: 'srs/black tea.jpg',
            origin: 'Sri Lanka (Ceylon) highlands',
            notes: 'Malty, robust, with light cocoa undertones',
            brew: '95°C — 3–4 min',
            benefits: 'Contains flavonoids; supports alertness',
            history: 'Ceylon black tea has been a major export since the 19th century.',
            sources: ['https://en.wikipedia.org/wiki/Black_tea','https://en.wikipedia.org/wiki/Ceylon_tea']
        },
        'green-tea': {
            id: 'green-tea',
            name: 'Nandana Green Tea',
            desc: 'Light, grassy green tea with fresh vegetal notes.',
            price: 14.00,
            image: 'srs/green tea.png',
            origin: 'China / East Asia styles',
            notes: 'Fresh, grassy, mildly sweet',
            brew: '80°C — 1–3 min',
            benefits: 'Rich in polyphenols (catechins); gentle stimulation',
            history: 'Green tea is ancient in East Asia and is minimally oxidized to retain freshness.',
            sources: ['https://en.wikipedia.org/wiki/Green_tea']
        },
        'white-tea': {
            id: 'white-tea',
            name: 'Nandana White Tea',
            desc: 'Delicate white tea made from young buds and leaves.',
            price: 18.00,
            image: 'srs/white tea.png',
            origin: 'Fujian region (traditional)',
            notes: 'Subtle floral and honeyed sweetness',
            brew: '75–85°C — 3–5 min',
            benefits: 'High in antioxidants; light caffeine',
            history: 'White tea is a lightly processed Chinese style prized for its purity.',
            sources: ['https://en.wikipedia.org/wiki/White_tea']
        },
        'oolong-tea': {
            id: 'oolong-tea',
            name: 'Nandana Oolong Tea',
            desc: 'Semi-oxidized oolong with layered aromatics.',
            price: 16.00,
            image: 'srs/oolong tea.png',
            origin: 'China / Taiwan styles',
            notes: 'Floral, stone-fruit, lightly roasted notes',
            brew: '85–95°C — 2–4 min (multiple infusions)',
            benefits: 'Supports digestion and sustained energy',
            history: 'Oolong occupies the middle ground between green and black teas.',
            sources: ['https://en.wikipedia.org/wiki/Oolong']
        },
        'almond-tea': {
            id: 'almond-tea',
            name: 'Nandana Almond Tea',
            desc: 'Tea blended with natural almond aroma.',
            price: 17.00,
            image: 'srs/ahmad tea.png',
            origin: 'Blended flavor — tea base with almond essence',
            notes: 'Warm nutty almond, creamy mouthfeel',
            brew: '90°C — 3–4 min',
            benefits: 'Pleasant, comforting flavored tea',
            history: 'Almond-flavored blends combine tea with nutty aromatics for a refined infusion.',
            sources: ['https://en.wikipedia.org/wiki/Almond']
        },
        'cinnamon-tea': {
            id: 'cinnamon-tea',
            name: 'Nandana Cinnamon Tea',
            desc: 'Spiced tea blended with Ceylon cinnamon.',
            price: 19.00,
            image: 'srs/cinnamon tea.jpg',
            origin: 'Tea base blended with Ceylon (true) cinnamon',
            notes: 'Warm cinnamon spice and gentle sweetness',
            brew: '95°C — 3–4 min',
            benefits: 'Aromatic spice; traditional warming flavour',
            history: 'Cinnamon has a long culinary history; Ceylon cinnamon is prized for its quality.',
            sources: ['https://en.wikipedia.org/wiki/Cinnamon','https://en.wikipedia.org/wiki/Ceylon_tea']
        }
    };

    function getParam(name) {
        const url = new URL(window.location.href);
        return url.searchParams.get(name);
    }

    function formatPrice(value) {
        return `$${value.toFixed(2)}`;
    }

    function loadProduct() {
        const id = getParam('id');
        const product = PRODUCTS[id] || Object.values(PRODUCTS)[0];

        document.getElementById('pd-name').textContent = product.name;
        document.getElementById('pd-title').textContent = product.name;
        document.getElementById('pd-desc').textContent = product.desc || '';
        document.getElementById('pd-price').textContent = formatPrice(product.price || 0);
        const img = document.getElementById('pd-image');
        img.src = product.image || '';
        img.alt = product.name || '';

        // Explainer content (essential fields only)
        document.getElementById('pd-origin').textContent = product.origin || '';
        document.getElementById('pd-notes').textContent = product.notes || '';
        const brewEl = document.getElementById('pd-brew');
        brewEl.innerHTML = product.brew ? `<li>${product.brew}</li>` : '';
        document.getElementById('pd-benefits').textContent = product.benefits || '';
        document.getElementById('pd-history').textContent = product.history || '';

        // actions
        const qtyInput = document.getElementById('pd-qty');
        document.getElementById('pd-add').onclick = () => {
            const qty = Math.max(1, parseInt(qtyInput.value || '1', 10));
            const item = { id: product.id, name: product.name, price: product.price, qty };
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const existing = cart.find(c => c.id === item.id);
            if (existing) existing.qty += qty; else cart.push(item);
            localStorage.setItem('cart', JSON.stringify(cart));
            alert(`${product.name} added to cart (x${qty}).`);
        };

        document.getElementById('pd-order').onclick = () => {
            const qty = Math.max(1, parseInt(qtyInput.value || '1', 10));
            const params = new URLSearchParams({ product: product.id, qty: String(qty) });
            window.location.href = `contact.html?${params.toString()}`;
        };

        // wholesale display
        try {
            const ws = sessionStorage.getItem('wholesaleUser');
            const wsEl = document.getElementById('pd-wholesale');
            if (ws && wsEl) {
                const wholesalePrice = ((parseFloat(product.price) || 0) * 0.8).toFixed(2);
                wsEl.textContent = `Wholesale: $${wholesalePrice}`;
                wsEl.style.display = 'block';
            } else if (wsEl) wsEl.style.display = 'none';
        } catch (e) { /* ignore */ }
    }

    // Search modal logic (uses PRODUCTS defined above)
    document.addEventListener('DOMContentLoaded', () => {
        loadProduct();
        const searchIcon = document.getElementById('search-icon');
        const searchModal = document.getElementById('search-modal');
        const closeSearch = document.getElementById('close-search');
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');

        if (searchIcon) searchIcon.addEventListener('click', (e) => { e.preventDefault(); searchModal.style.display = 'flex'; searchInput.focus(); });
        if (closeSearch) closeSearch.addEventListener('click', () => { searchModal.style.display = 'none'; searchInput.value = ''; searchResults.innerHTML = ''; });
        if (searchModal) searchModal.addEventListener('click', (e) => { if (e.target === searchModal) searchModal.style.display = 'none'; });

        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                const q = e.target.value.toLowerCase().trim();
                if (!q) { searchResults.innerHTML = ''; return; }
                const matches = Object.entries(PRODUCTS).filter(([id, p]) => p.name.toLowerCase().includes(q) || id.includes(q));
                searchResults.innerHTML = matches.map(([id, p]) => `
                    <div class="search-result-item">
                        <img src="${p.image}" alt="${p.name}" class="search-result-img">
                        <div style="flex:1;">
                            <a href="product.html?id=${id}" onclick="document.getElementById('search-modal').style.display='none';">${p.name}</a>
                            <span class="price">$${(p.price||0).toFixed(2)}</span>
                        </div>
                    </div>
                `).join('') || '<p class="empty-msg">No products found</p>';
            });

            searchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    const firstLink = searchResults.querySelector('a');
                    if (firstLink) firstLink.click();
                }
            });
        }
    });
    </script>

    <div id="search-modal" class="search-modal">
        <div class="search-modal-content">
            <span id="close-search" class="close-search">&times;</span>
            <input type="text" id="search-input" placeholder="Search teas..." autofocus>
            <div id="search-results" class="search-results"></div>
        </div>
    </div>
</body>
</html>